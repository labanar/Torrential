(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[185],{6771:function(){},8022:function(){},6045:function(){},8190:function(){},7333:function(){},6139:function(){},8289:function(t,e,n){Promise.resolve().then(n.bind(n,1194))},1194:function(t,e,n){"use strict";n.r(e),n.d(e,{default:function(){return M}});var i=n(3827),o=n(5330),s=n(7173),r=n(828),a=n(8508),c=n(9053),l=n(2794);let d=(0,a.oM)({name:"notifications",initialState:{toastQueue:[],currentToast:void 0},reducers:{queueNotification(t,e){t.toastQueue=[...t.toastQueue,e.payload],t.currentToast=e.payload},dequeueNext(t){t.currentToast=t.toastQueue.shift()}}}),{queueNotification:u,dequeueNext:p}=d.actions;var h=d.reducer;let f=(0,a.xC)({reducer:{torrents:c.ZP,peers:l.ZP,notifications:h}}),_=(0,o.B1)({config:{initialColorMode:"dark"}});function x(t){let{children:e}=t;return(0,i.jsx)(r.zt,{store:f,children:(0,i.jsx)(s.x,{theme:_,children:e})})}var m=n(4518);n(8222);var g=n(4090),T=n(9501),j=n(8008),y=n(7535);class b{registerEvents(){this.connection.on("PeerConnected",t=>{let e={...t,isSeed:!1};f.dispatch((0,l.X3)(e))}),this.connection.on("PeerDisconnected",t=>{let{infoHash:e,peerId:n}=t;f.dispatch((0,l.EK)({infoHash:e,peerId:n}))}),this.connection.on("PeerBitfieldReceived",t=>{f.dispatch((0,l.GG)({infoHash:t.infoHash,peerId:t.peerId,update:{isSeed:t.hasAllPieces}}))}),this.connection.on("PieceVerified",t=>{let{infoHash:e,progress:n}=t,i={infoHash:e,update:{progress:Number(n.toFixed(3))}};f.dispatch((0,c.BL)(i))}),this.connection.on("TorrentStarted",t=>{let{infoHash:e}=t;f.dispatch((0,c.BL)({infoHash:e,update:{status:"Running"}}));let{torrents:n}=f.getState(),{name:i}=n[e];f.dispatch(u({title:"Torrent Started",description:i,duration:3500,isClosable:!0,status:"success",icon:y.aQp}))}),this.connection.on("TorrentStopped",t=>{let{infoHash:e}=t,{torrents:n}=f.getState(),{name:i}=n[e];f.dispatch((0,c.BL)({infoHash:e,update:{status:"Stopped",downloadRate:0,uploadRate:0}})),f.dispatch(u({title:"Torrent Stopped",description:i,duration:3500,isClosable:!0,status:"success",icon:y.oD0}))}),this.connection.on("TorrentRemoved",t=>{let{infoHash:e}=t,{torrents:n}=f.getState(),{name:i}=n[e];f.dispatch((0,c.Zo)({infoHash:e})),f.dispatch(u({title:"Torrent Removed",description:i,duration:3500,isClosable:!0,status:"warning",icon:y.$aW}))}),this.connection.on("TorrentCompleted",t=>{let{infoHash:e}=t,{torrents:n}=f.getState(),{name:i}=n[e];f.dispatch(u({title:"Torrent Completed",description:i,duration:3500,isClosable:!0,status:"success",icon:y.f8k}))}),this.connection.on("TorrentStatsUpdated",t=>{let{infoHash:e,uploadRate:n,downloadRate:i}=t;f.dispatch((0,c.BL)({infoHash:e,update:{uploadRate:n,downloadRate:i}}))}),this.connection.on("TorrentAdded",t=>{let{infoHash:e,name:n,totalSize:i}=t;f.dispatch((0,c.BL)({infoHash:e,update:{infoHash:e,name:n,sizeInBytes:i,progress:0,status:"Idle",bytesDownloaded:0,bytesUploaded:0,downloadRate:0,uploadRate:0}})),f.dispatch(u({title:"Torrent Added",description:n,duration:3500,isClosable:!0,status:"success",icon:y.KtF}))})}async startConnection(){try{await this.connection.start(),console.log("SignalR connection successfully started.")}catch(t){console.error("SignalR Connection Error:",t)}}async stopConnection(){await this.connection.stop(),console.log("SignalR connection stopped.")}constructor(t){this.url=t,this.connection=new T.s().withUrl(this.url).withAutomaticReconnect().configureLogging(j.i.Information).build(),this.registerEvents()}}var v=n(8415),N=n.n(v),C=n(7907),S=n(109),P=n(6632),w=n(4569),I=n(8308),R=n(6282),k=n(4741),E=n(4907),B=n(156),A=n.n(B);let Z=t=>t.notifications.currentToast,z=(t,e,n)=>{let{status:o,icon:s,title:r,description:a}=n,c="blue.300";return"success"===o&&(c="green.300"),"warning"===o&&(c="orange.300"),"error"===o&&(c="red.300"),(0,i.jsxs)(I.xu,{bg:c,id:t.toString(),className:A().toastContainer,children:[(0,i.jsx)(I.xu,{className:A().icon,children:"string"!=typeof s&&void 0!==s&&(0,i.jsx)(E.G,{icon:s,size:"xl"})}),(0,i.jsxs)(I.xu,{className:A().content,children:[(0,i.jsx)(I.xu,{className:A().title,children:(0,i.jsx)(w.x,{size:"sm",children:r})}),(0,i.jsx)(I.xu,{className:A().description,children:(0,i.jsx)(w.x,{size:"sm",children:a})})]}),(0,i.jsx)(I.xu,{className:A().close,children:(0,i.jsx)(R.P,{onClick:e})})]})};var L=()=>{let t=(0,r.I0)(),e=(0,k.p)(),n=(0,r.v9)(Z);return(0,g.useEffect)(()=>{t(p())},[t]),(0,g.useEffect)(()=>{if(n){let{duration:i}=n;e({position:"bottom-right",duration:i,render:t=>{let{id:e,onClose:i}=t;return z(e,i,n)}}),t(p())}},[n,e,t]),(0,i.jsx)(i.Fragment,{})};function M(t){let{children:e}=t;return(0,g.useEffect)(()=>{let t=new b("".concat("","/torrents/hub"));return t.startConnection(),()=>{t.stopConnection()}},[]),(0,i.jsx)("html",{lang:"en",style:{height:"100%",margin:0},children:(0,i.jsxs)("body",{style:{height:"100%",margin:0,display:"flex",flexDirection:"column"},children:[(0,i.jsx)(S.Z,{initialColorMode:"system"}),(0,i.jsxs)(x,{children:[(0,i.jsx)(L,{}),(0,i.jsxs)("div",{className:N().root,children:[(0,i.jsx)(Q,{}),(0,i.jsx)("div",{className:N().divider,children:(0,i.jsx)(P.i,{orientation:"vertical"})}),(0,i.jsx)("div",{id:"main",className:N().main,children:e})]})]})]})})}function Q(){return(0,i.jsxs)("div",{id:"sidebar",className:N().sidebar,children:[(0,i.jsx)(D,{label:"Torrents",linksTo:"/"}),(0,i.jsx)(D,{label:"Peers",linksTo:"/"}),(0,i.jsx)(D,{label:"Integrations",linksTo:"/"}),(0,i.jsx)(D,{label:"Settings",linksTo:"/settings"})]})}function D(t){let{label:e,linksTo:n}=t,o=(0,C.useRouter)();return(0,i.jsx)("div",{className:N().sidebarItem,onClick:()=>o.push(n),children:(0,i.jsx)(w.x,{fontSize:"md",children:e})})}m.vc.autoAddCss=!1},2794:function(t,e,n){"use strict";n.d(e,{EK:function(){return s},GG:function(){return a},X3:function(){return o},Z8:function(){return r}});let i=(0,n(8508).oM)({name:"peers",initialState:{},reducers:{addPeer(t,e){let{infoHash:n,peerId:i,ip:o,port:s,isSeed:r}=e.payload,a={infoHash:n,peerId:i,ip:o,port:s,isSeed:r};t[n]=t[n]?[...t[n],a]:[a]},removePeer(t,e){let{infoHash:n,peerId:i}=e.payload;t[n]=t[n].filter(t=>t.peerId!==i)},setPeers(t,e){let{infoHash:n,peers:i}=e.payload;t[n]=i},updatePeer(t,e){let{infoHash:n,peerId:i,update:o}=e.payload,s=t[n].findIndex(t=>t.peerId===i);-1!==s&&(t[n][s]={...t[n][s],...o})}}}),{addPeer:o,removePeer:s,setPeers:r,updatePeer:a}=i.actions;e.ZP=i.reducer},9053:function(t,e,n){"use strict";n.d(e,{BL:function(){return s},Zo:function(){return r},_b:function(){return o}});let i=(0,n(8508).oM)({name:"torrents",initialState:{},reducers:{setTorrents:(t,e)=>({...t,...e.payload}),updateTorrent(t,e){let{infoHash:n,update:i}=e.payload;t[n]={...t[n],...i}},removeTorrent(t,e){let{infoHash:n}=e.payload;delete t[n]}}}),{setTorrents:o,updateTorrent:s,removeTorrent:r}=i.actions;e.ZP=i.reducer},8415:function(t){t.exports={root:"layout_root__9axYy",sidebar:"layout_sidebar__SmN0y",divider:"layout_divider__D8thz",sidebarItem:"layout_sidebarItem__AOy__",main:"layout_main__ABI2k"}},156:function(t){t.exports={toastContainer:"ToastNotification_toastContainer__5LKER",success:"ToastNotification_success__zskI_",warning:"ToastNotification_warning__txxqr",error:"ToastNotification_error__1_AdW",info:"ToastNotification_info__lvuVC",icon:"ToastNotification_icon__cSeZ7",content:"ToastNotification_content__tXPQA",title:"ToastNotification_title__U67Mu",description:"ToastNotification_description__neRwu",close:"ToastNotification_close__i_qhx"}}},function(t){t.O(0,[676,985,879,357,971,69,744],function(){return t(t.s=8289)}),_N_E=t.O()}]);