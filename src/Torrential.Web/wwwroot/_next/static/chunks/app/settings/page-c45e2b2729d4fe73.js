(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[938],{903:function(n,e,t){Promise.resolve().then(t.bind(t,15))},15:function(n,e,t){"use strict";t.r(e),t.d(e,{default:function(){return y}});var o=t(3827),c=t(1998),a=t(2670);let l=n=>{let{min:e,max:t,className:l,fieldName:s,control:i}=n;return(0,o.jsx)(a.Qr,{name:s,control:i,render:n=>{let{field:a}=n;return(0,o.jsxs)(c.Y2,{className:l,min:e,max:t,...a,children:[(0,o.jsx)(c.zu,{}),(0,o.jsxs)(c.Fi,{children:[(0,o.jsx)(c.WQ,{}),(0,o.jsx)(c.Y_,{})]})]})}})};var s=t(7895),i=t(6632),r=t(9174),d=t(707),x=t(6520),u=t(7535),m=t(4907),f=t(3124),h=t.n(f),p=t(2372);let j=n=>{let{className:e,fieldName:t,control:c,text:l}=n;return(0,o.jsx)(a.Qr,{name:t,control:c,render:n=>{let{field:{onChange:t,onBlur:c,value:a,ref:s}}=n;return(0,o.jsx)(p.X,{onChange:n=>t(n.target.checked),onBlur:c,isChecked:a,ref:s,className:e,children:null!=l?l:""})}})};var g=t(3518);let b=n=>{let{className:e,fieldName:t,control:c}=n;return(0,o.jsx)(a.Qr,{name:t,control:c,render:n=>{let{field:e}=n;return(0,o.jsx)(g.I,{...e})}})};var C=t(4090);function y(){return(0,o.jsx)(N,{})}function N(){let{control:n,formState:{isDirty:e},reset:t}=(0,a.cI)({defaultValues:{downloadPath:"",completedPath:""}}),c=(0,a.qo)({control:n}),d=(0,C.useCallback)(async()=>{try{let n=await fetch("".concat("","/settings/file")),e=await n.json();console.log(e);let{downloadPath:o,completedPath:c}=e.data;t({downloadPath:o,completedPath:c})}catch(n){}},[t]),x=(0,C.useCallback)(async n=>{try{await fetch("".concat("","/settings/file"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(n){}},[]),{control:f,formState:{isDirty:p},reset:g}=(0,a.cI)({defaultValues:{maxConnectionsPerTorrent:"",maxConnectionsGlobal:"",maxHalfOpenConnections:""}}),y=(0,a.qo)({control:f}),N=(0,C.useCallback)(async()=>{try{let n=await fetch("".concat("","/settings/connection")),e=await n.json();console.log(e);let{maxConnectionsGlobal:t,maxConnectionsPerTorrent:o,maxHalfOpenConnections:c}=e.data;g({maxConnectionsGlobal:"".concat(t),maxConnectionsPerTorrent:"".concat(o),maxHalfOpenConnections:"".concat(c)})}catch(n){}},[g]),k=(0,C.useCallback)(async n=>{try{await fetch("".concat("","/settings/connection"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(n){}},[]),{control:w,formState:{isDirty:P},reset:_}=(0,a.cI)({defaultValues:{port:"53123",enabled:!0}}),O=(0,a.qo)({control:w}),v=(0,C.useCallback)(async()=>{try{let n=await fetch("".concat("","/settings/tcp")),e=await n.json();console.log(e);let{enabled:t,port:o}=e.data;_({enabled:t,port:"".concat(o)})}catch(n){}},[_]),T=(0,C.useCallback)(async n=>{try{await fetch("".concat("","/settings/tcp"),{method:"POST",body:JSON.stringify(n),headers:{"Content-Type":"application/json"}})}catch(n){}},[]);return(0,C.useEffect)(()=>{d(),v(),N()},[]),(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{style:{padding:"1em",flexGrow:1,display:"flex",flexDirection:"column",gap:"16px",alignItems:"center"},children:[(0,o.jsx)(s.x,{alignSelf:"flex-start",fontSize:30,children:"Settings"}),(0,o.jsx)(i.i,{}),(0,o.jsx)(S,{name:"Files"}),(0,o.jsx)(I,{label:"Download Path",children:(0,o.jsx)(b,{fieldName:"downloadPath",control:n})}),(0,o.jsx)(I,{label:"Completed Path",children:(0,o.jsx)(b,{fieldName:"completedPath",control:n})}),(0,o.jsx)(i.i,{}),(0,o.jsx)(S,{name:"Connections"}),(0,o.jsx)(I,{label:"Max connections (per torrent)",children:(0,o.jsx)(l,{min:0,control:f,fieldName:"maxConnectionsPerTorrent",className:h().connectionNumericInput})}),(0,o.jsx)(I,{label:"Max connections (Global)",children:(0,o.jsx)(l,{min:0,control:f,fieldName:"maxConnectionsGlobal",className:h().connectionNumericInput})}),(0,o.jsx)(I,{label:"Max Half-open connections",children:(0,o.jsx)(l,{min:0,control:f,fieldName:"maxHalfOpenConnections",className:h().connectionNumericInput})}),(0,o.jsx)(i.i,{}),(0,o.jsx)(S,{name:"Inbound Connections"}),(0,o.jsx)(j,{control:w,fieldName:"enabled",text:"Allow inbound connections",className:h().tcpInboundCheckbox}),(0,o.jsx)(I,{label:"Port",children:(0,o.jsx)(l,{min:0,control:w,fieldName:"port",className:h().portInput})})]}),(0,o.jsx)(r.h,{position:"absolute",bottom:0,right:0,mr:8,mb:8,isRound:!0,variant:"solid",colorScheme:"green","aria-label":"Done",fontSize:"30px",size:"lg",isDisabled:!e&&!p&&!P,onClick:()=>{e&&(console.log("Saving file settings"),console.log(c),x(c),t(c)),p&&(console.log("Saving connection settings"),console.log(y),k(y),g(y)),P&&(console.log("Saving TCP Listener settings"),console.log(O),T(O),_(O))},icon:(0,o.jsx)(m.G,{icon:u.LEp})})]})}function S(n){let{name:e}=n;return(0,o.jsx)(s.x,{alignSelf:"flex-start",fontSize:20,fontWeight:500,pb:4,children:e})}let I=n=>{let{label:e,children:t}=n;return(0,o.jsxs)(d.r,{templateColumns:"repeat(2, 1fr)",alignItems:"center",gap:8,children:[(0,o.jsx)(x.P,{children:(0,o.jsx)(s.x,{align:"right",children:e})}),t]})}},3124:function(n){n.exports={portInput:"page_portInput__l3Fnd",tcpInboundCheckbox:"page_tcpInboundCheckbox__cVpco",connectionNumericInput:"page_connectionNumericInput__Di9lL"}}},function(n){n.O(0,[676,920,663,316,971,69,744],function(){return n(n.s=903)}),_N_E=n.O()}]);